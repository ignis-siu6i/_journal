- 등급: 골드 I
- PR: https://github.com/ignis-siu6i/_aps/pull/89
```python
import sys


# sys.stdin = open('sample_input.txt', 'r')
input = sys.stdin.readline

class SegTree:
    def __init__(self, arr):
        self.n = len(arr)
        size = 1
        while size < self.n:
            size <<= 1
        self.size = size
        self.tree = [0] * (2 * size)

        # build
        for i, v in enumerate(arr):
            self.tree[self.size + i] = v
        for i in range(self.size - 1, 0, -1):
            self.tree[i] = self.tree[i * 2] + self.tree[i * 2 + 1]

    def update(self, idx, value):
        """idx: 0-based"""
        i = self.size + idx
        self.tree[i] = value
        i //= 2
        while i:
            self.tree[i] = self.tree[i * 2] + self.tree[i * 2 + 1]
            i //= 2

    def query(self, l, r):
        """sum over [l, r], 0-based inclusive"""
        l += self.size
        r += self.size
        res = 0
        while l <= r:
            if l % 2 == 1:
                res += self.tree[l]
                l += 1
            if r % 2 == 0:
                res += self.tree[r]
                r -= 1
            l //= 2
            r //= 2
        return res


def main():
    N, Q = map(int, input().split())
    Zs = list(map(int, input().split()))
    st = SegTree(Zs)

    out = []
    for _ in range(Q):
        x, y, a, b = map(int, input().split())
        if x > y:
            x, y = y, x

        # x,y는 1-based, inclusive
        out.append(str(st.query(x - 1, y - 1)))

        # a는 1-based index
        st.update(a - 1, b)

    sys.stdout.write("\n".join(out))

if __name__ == "__main__":
    main()

```

- 세그먼트 트리 이해를 하기 위한 ChatGPT와의 질답: https://chatgpt.com/g/g-p-6978a0c7b52481918d0f0f0feddc4644-boj/c/6978a0d2-68e8-83a8-83c3-5f258657da65